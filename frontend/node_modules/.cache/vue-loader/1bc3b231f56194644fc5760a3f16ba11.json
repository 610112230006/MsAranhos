{"remainingRequest":"/Users/natthaphongngaongam/developments/MsAranhos/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/natthaphongngaongam/developments/MsAranhos/frontend/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/natthaphongngaongam/developments/MsAranhos/frontend/src/views/Login.vue","mtime":1642699329825},{"path":"/Users/natthaphongngaongam/developments/MsAranhos/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/natthaphongngaongam/developments/MsAranhos/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/natthaphongngaongam/developments/MsAranhos/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/natthaphongngaongam/developments/MsAranhos/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlIGdsb2JhbC1yZXF1aXJlICovCgppbXBvcnQgVnVleHlMb2dvIGZyb20gIkBjb3JlL2xheW91dHMvY29tcG9uZW50cy9Mb2dvLnZ1ZSI7CmltcG9ydCB7CiAgQlJvdywKICBCQ29sLAogIEJMaW5rLAogIEJGb3JtR3JvdXAsCiAgQkZvcm1JbnB1dCwKICBCSW5wdXRHcm91cEFwcGVuZCwKICBCSW5wdXRHcm91cCwKICBCRm9ybUNoZWNrYm94LAogIEJDYXJkVGV4dCwKICBCQ2FyZFRpdGxlLAogIEJJbWcsCiAgQkZvcm0sCiAgQkJ1dHRvbiwKfSBmcm9tICJib290c3RyYXAtdnVlIjsKaW1wb3J0IHsgcmVxdWlyZWQsIGVtYWlsLCBtaW4gfSBmcm9tICJAdmFsaWRhdGlvbnMiOwppbXBvcnQgeyB0b2dnbGVQYXNzd29yZFZpc2liaWxpdHkgfSBmcm9tICJAY29yZS9taXhpbnMvdWkvZm9ybXMiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZS9pbmRleCI7CmltcG9ydCBUb2FzdGlmaWNhdGlvbkNvbnRlbnQgZnJvbSAiQGNvcmUvY29tcG9uZW50cy90b2FzdGlmaWNhdGlvbi9Ub2FzdGlmaWNhdGlvbkNvbnRlbnQudnVlIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IGdldEhvbWVSb3V0ZUZvckxvZ2dlZEluVXNlciB9IGZyb20gIkAvYXV0aC91dGlscyI7CmltcG9ydCB1c2VKd3QgZnJvbSAiQC9hdXRoL2p3dC91c2VKd3QiOwppbXBvcnQgeyBWYWxpZGF0aW9uUHJvdmlkZXIsIFZhbGlkYXRpb25PYnNlcnZlciB9IGZyb20gInZlZS12YWxpZGF0ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQlJvdywKICAgIEJDb2wsCiAgICBCTGluaywKICAgIEJGb3JtR3JvdXAsCiAgICBCRm9ybUlucHV0LAogICAgQklucHV0R3JvdXBBcHBlbmQsCiAgICBCSW5wdXRHcm91cCwKICAgIEJGb3JtQ2hlY2tib3gsCiAgICBCQ2FyZFRleHQsCiAgICBCQ2FyZFRpdGxlLAogICAgQkltZywKICAgIEJGb3JtLAogICAgQkJ1dHRvbiwKICAgIFZ1ZXh5TG9nbywKICAgIFZhbGlkYXRpb25Qcm92aWRlciwKICAgIFZhbGlkYXRpb25PYnNlcnZlciwKICB9LAogIG1peGluczogW3RvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eV0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXR1czogIiIsCiAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBzaWRlSW1nOiByZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvcGFnZXMvbG9naW4tdjIuc3ZnIiksCiAgICAgIC8vIHZhbGlkYXRpb24gcnVsZXNpbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZS9pbmRleCcKICAgICAgcmVxdWlyZWQsCiAgICAgIGVtYWlsLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYXNzd29yZFRvZ2dsZUljb24oKSB7CiAgICAgIHJldHVybiB0aGlzLnBhc3N3b3JkRmllbGRUeXBlID09PSAicGFzc3dvcmQiID8gIkV5ZUljb24iIDogIkV5ZU9mZkljb24iOwogICAgfSwKICAgIGltZ1VybCgpIHsKICAgICAgaWYgKHN0b3JlLnN0YXRlLmFwcENvbmZpZy5sYXlvdXQuc2tpbiA9PT0gImRhcmsiKSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZ1ZS9uby1zaWRlLWVmZmVjdHMtaW4tY29tcHV0ZWQtcHJvcGVydGllcwogICAgICAgIHRoaXMuc2lkZUltZyA9IHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9wYWdlcy9sb2dpbi12Mi1kYXJrLnN2ZyIpOwogICAgICAgIHJldHVybiB0aGlzLnNpZGVJbWc7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuc2lkZUltZzsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBpc0xvZ2luKCkgewogICAgICB0aGlzLiRyZWZzLnNpbXBsZVJ1bGVzLnZhbGlkYXRlKCkudGhlbigoc3VjY2VzcykgPT4gewogICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJGh0dHAucG9zdCgiYXBpL3YxL2F1dGgvbG9naW4iLCBkYXRhKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLnRva2VuKSB7CiAgICAgICAgICAgICAgY29uc3QgeyB1c2VyRGF0YSB9ID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgcmVzLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyRGF0YSIsIEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSk7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInZlcnRpY2FsTWVudS9nZXRSb2xlIik7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyCiAgICAgICAgICAgICAgICAucmVwbGFjZShnZXRIb21lUm91dGVGb3JMb2dnZWRJblVzZXIodXNlckRhdGEucm9sZSkpCiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IFRvYXN0aWZpY2F0aW9uQ29udGVudCwKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogInRvcC1yaWdodCIsCiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBg4Lii4Li04LiZ4LiU4Li14LiV4LmJ4Lit4LiZ4Lij4Lix4LiaICR7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhLmZpcnN0bmFtZSB8fCB1c2VyRGF0YS51c2VybmFtZQogICAgICAgICAgICAgICAgICAgICAgfWAsCiAgICAgICAgICAgICAgICAgICAgICBpY29uOiAiQ29mZmVlSWNvbiIsCiAgICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBg4LiE4Li44LiT4LmA4LiC4LmJ4Liy4Liq4Li54LmI4Lij4Liw4Lia4Lia4Liq4Liz4LmA4Lij4LmH4LiI4LmB4Lil4LmJ4Lin4LmD4LiZ4LiQ4Liy4LiZ4LiwICR7dXNlckRhdGEucm9sZX0uIOC4leC4reC4meC4meC4teC5ieC4hOC4uOC4k+C4quC4suC4oeC4suC4o+C4luC5gOC4o+C4tOC5iOC4oeC5g+C4iuC5ieC4h+C4suC4meC5gOC4p+C5h+C4muC5hOC4lOC5ieC5geC4peC5ieC4pyFgLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLm1lc3NhZ2UgPT0gInVzZXJuYW1lIG5vdCBmb3VuZCIpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoIuC4muC4seC4jeC4iuC4teC4nOC4ueC5ieC5g+C4iuC5ieC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hyIsIHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IGDguYDguILguYnguLLguKrguLnguYjguKPguLDguJrguJrguYTguKHguYjguKrguLPguYDguKPguYfguIhgLAogICAgICAgICAgICAgICAgICB2YXJpYW50OiAiZGFuZ2VyIiwKICAgICAgICAgICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLm1lc3NhZ2UgPT0gInBhc3N3b3JkIG5vdCBmb3VuZCIpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoIuC4o+C4q+C4seC4quC4nOC5iOC4suC4meC4nOC4ueC5ieC5g+C4iuC5ieC5hOC4oeC5iOC4luC4ueC4geC4leC5ieC4reC4hyIsIHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IGDguYDguILguYnguLLguKrguLnguYjguKPguLDguJrguJrguYTguKHguYjguKrguLPguYDguKPguYfguIhgLAogICAgICAgICAgICAgICAgICB2YXJpYW50OiAiZGFuZ2VyIiwKICAgICAgICAgICAgICAgICAgc29saWQ6IHRydWUsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"auth-wrapper auth-v2\">\n    <b-row class=\"auth-inner m-0\">\n      <!-- Brand logo-->\n      <b-link class=\"brand-logo\">\n        <vuexy-logo />\n        <h2 class=\"brand-text text-primary ml-1\">MSAranHos</h2>\n      </b-link>\n      <!-- /Brand logo-->\n\n      <!-- Left Text-->\n      <b-col lg=\"8\" class=\"d-none d-lg-flex align-items-center p-5\">\n        <div\n          class=\"w-100 d-lg-flex align-items-center justify-content-center px-5\"\n        >\n          <b-img fluid :src=\"imgUrl\" alt=\"Login V2\" />\n        </div>\n      </b-col>\n      <!-- /Left Text-->\n\n      <!-- Login-->\n      <b-col lg=\"4\" class=\"d-flex align-items-center auth-bg px-2 p-lg-5\">\n        <b-col sm=\"8\" md=\"6\" lg=\"12\" class=\"px-xl-2 mx-auto\">\n          <b-card-title title-tag=\"h2\" class=\"font-weight-bold mb-1\">\n            Welcome to MsAranhos! 👋\n          </b-card-title>\n\n          <!-- form -->\n          <validation-observer ref=\"simpleRules\">\n            <b-form class=\"auth-login-form mt-2\" @submit.prevent=\"isLogin\">\n              <!-- email -->\n              <b-form-group label=\"บัญชีผู้ใช้\" label-for=\"login-email\">\n                <validation-provider\n                  #default=\"{ errors }\"\n                  name=\"บัญชีผู้ใช้\"\n                  rules=\"required\"\n                >\n                  <b-form-input\n                    id=\"login-email\"\n                    v-model=\"username\"\n                    :state=\"errors.length > 0 ? false : null\"\n                    name=\"username\"\n                    placeholder=\"กรอกบัญชีผู้ใช้\"\n                  />\n                  <small class=\"text-danger\">{{ errors[0] }}</small>\n                </validation-provider>\n              </b-form-group>\n\n              <!-- forgot password -->\n              <b-form-group>\n                <div class=\"d-flex justify-content-between\">\n                  <label for=\"login-password\">รหัสผ่าน</label>\n                  <b-link :to=\"{ name: 'auth-forgot-password-v2' }\">\n                    <small>Forgot Password?</small>\n                  </b-link>\n                </div>\n                <validation-provider\n                  #default=\"{ errors }\"\n                  name=\"Password\"\n                  vid=\"password\"\n                  rules=\"required|min:8\"\n                >\n                  <b-input-group\n                    class=\"input-group-merge\"\n                    :class=\"errors.length > 0 ? 'is-invalid' : null\"\n                  >\n                    <b-form-input\n                      id=\"login-password\"\n                      v-model=\"password\"\n                      class=\"form-control-merge\"\n                      :state=\"errors.length > 0 ? false : null\"\n                      :type=\"passwordFieldType\"\n                      name=\"login-password\"\n                      placeholder=\"············\"\n                    />\n                    <b-input-group-append is-text>\n                      <feather-icon\n                        class=\"cursor-pointer\"\n                        :icon=\"passwordToggleIcon\"\n                        @click=\"togglePasswordVisibility\"\n                      />\n                    </b-input-group-append>\n                  </b-input-group>\n                  <small class=\"text-danger\">{{ errors[0] }}</small>\n                </validation-provider>\n              </b-form-group>\n\n              <!-- checkbox -->\n              <b-form-group>\n                <b-form-checkbox\n                  id=\"remember-me\"\n                  v-model=\"status\"\n                  name=\"checkbox-1\"\n                >\n                  Remember Me\n                </b-form-checkbox>\n              </b-form-group>\n\n              <!-- submit buttons -->\n              <b-button type=\"submit\" variant=\"primary\" block>\n                Sign in\n              </b-button>\n            </b-form>\n          </validation-observer>\n        </b-col>\n      </b-col>\n      <!-- /Login-->\n    </b-row>\n  </div>\n</template>\n\n<script>\n/* eslint-disable global-require */\n\nimport VuexyLogo from \"@core/layouts/components/Logo.vue\";\nimport {\n  BRow,\n  BCol,\n  BLink,\n  BFormGroup,\n  BFormInput,\n  BInputGroupAppend,\n  BInputGroup,\n  BFormCheckbox,\n  BCardText,\n  BCardTitle,\n  BImg,\n  BForm,\n  BButton,\n} from \"bootstrap-vue\";\nimport { required, email, min } from \"@validations\";\nimport { togglePasswordVisibility } from \"@core/mixins/ui/forms\";\nimport store from \"@/store/index\";\nimport ToastificationContent from \"@core/components/toastification/ToastificationContent.vue\";\nimport router from \"@/router\";\nimport { getHomeRouteForLoggedInUser } from \"@/auth/utils\";\nimport useJwt from \"@/auth/jwt/useJwt\";\nimport { ValidationProvider, ValidationObserver } from \"vee-validate\";\n\nexport default {\n  components: {\n    BRow,\n    BCol,\n    BLink,\n    BFormGroup,\n    BFormInput,\n    BInputGroupAppend,\n    BInputGroup,\n    BFormCheckbox,\n    BCardText,\n    BCardTitle,\n    BImg,\n    BForm,\n    BButton,\n    VuexyLogo,\n    ValidationProvider,\n    ValidationObserver,\n  },\n  mixins: [togglePasswordVisibility],\n  data() {\n    return {\n      status: \"\",\n      password: \"\",\n      username: \"\",\n      sideImg: require(\"@/assets/images/pages/login-v2.svg\"),\n      // validation rulesimport store from '@/store/index'\n      required,\n      email,\n    };\n  },\n  computed: {\n    passwordToggleIcon() {\n      return this.passwordFieldType === \"password\" ? \"EyeIcon\" : \"EyeOffIcon\";\n    },\n    imgUrl() {\n      if (store.state.appConfig.layout.skin === \"dark\") {\n        // eslint-disable-next-line vue/no-side-effects-in-computed-properties\n        this.sideImg = require(\"@/assets/images/pages/login-v2-dark.svg\");\n        return this.sideImg;\n      }\n      return this.sideImg;\n    },\n  },\n  methods: {\n    isLogin() {\n      this.$refs.simpleRules.validate().then((success) => {\n        if (success) {\n          let data = {\n            username: this.username,\n            password: this.password,\n          };\n          this.$http.post(\"api/v1/auth/login\", data).then((res) => {\n            if (res.data.token) {\n              const { userData } = res.data;\n              localStorage.setItem(\"token\", res.data.token);\n              localStorage.setItem(\"userData\", JSON.stringify(userData));\n              this.$store.dispatch(\"verticalMenu/getRole\");\n              this.$router\n                .replace(getHomeRouteForLoggedInUser(userData.role))\n                .then(() => {\n                  this.$toast({\n                    component: ToastificationContent,\n                    position: \"top-right\",\n                    props: {\n                      title: `ยินดีต้อนรับ ${\n                        userData.firstname || userData.username\n                      }`,\n                      icon: \"CoffeeIcon\",\n                      variant: \"success\",\n                      text: `คุณเข้าสู่ระบบสำเร็จแล้วในฐานะ ${userData.role}. ตอนนี้คุณสามารถเริ่มใช้งานเว็บได้แล้ว!`,\n                    },\n                  });\n                });\n            } else {\n              if (res.data.message == \"username not found\") {\n                this.$bvToast.toast(\"บัญชีผู้ใช้ไม่ถูกต้อง\", {\n                  title: `เข้าสู่ระบบไม่สำเร็จ`,\n                  variant: \"danger\",\n                  solid: true,\n                });\n              }\n              if (res.data.message == \"password not found\") {\n                this.$bvToast.toast(\"รหัสผ่านผู้ใช้ไม่ถูกต้อง\", {\n                  title: `เข้าสู่ระบบไม่สำเร็จ`,\n                  variant: \"danger\",\n                  solid: true,\n                });\n              }\n            }\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"@core/scss/vue/pages/page-auth.scss\";\n</style>\n"]}]}